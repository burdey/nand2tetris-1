  @ARG
  D=M
  @1
  D=D+A
  @R13
  M=D
  // R13にsegment+indexの指す位置が格納された。
  @R13
  A=M
  D=M
        @SP
        A=M
        M=D
        @SP
        M=M+1
          @R3
          D=A
          @1
          D=D+A
          @R13
          M=D
          // ↑R13に R3+index を保存
          @SP
          M=M-1
          A=M
          D=M
          @R13
          A=M
          M=D
          @0
          D=A
        @SP
        A=M
        M=D
        @SP
        M=M+1
    // ↓R13に THAT+index を保存
    @THAT
    D=M
    @0
    D=D+A
    @R13
    M=D
    // ↑R13に THAT+index を保存
    // ↓R13の位置にスタックから値を格納
    @SP
    M=M-1
    A=M
    D=M
    @R13
    A=M
    M=D
          @1
          D=A
        @SP
        A=M
        M=D
        @SP
        M=M+1
    // ↓R13に THAT+index を保存
    @THAT
    D=M
    @1
    D=D+A
    @R13
    M=D
    // ↑R13に THAT+index を保存
    // ↓R13の位置にスタックから値を格納
    @SP
    M=M-1
    A=M
    D=M
    @R13
    A=M
    M=D
  @ARG
  D=M
  @0
  D=D+A
  @R13
  M=D
  // R13にsegment+indexの指す位置が格納された。
  @R13
  A=M
  D=M
        @SP
        A=M
        M=D
        @SP
        M=M+1
          @2
          D=A
        @SP
        A=M
        M=D
        @SP
        M=M+1
        @SP
        M=M-1
        A=M
        D=M
        @SP
        M=M-1
        A=M
        D=M-D
        M=D
        @SP
        M=M+1
    // ↓R13に ARG+index を保存
    @ARG
    D=M
    @0
    D=D+A
    @R13
    M=D
    // ↑R13に ARG+index を保存
    // ↓R13の位置にスタックから値を格納
    @SP
    M=M-1
    A=M
    D=M
    @R13
    A=M
    M=D
      (MAIN_LOOP_START)
  @ARG
  D=M
  @0
  D=D+A
  @R13
  M=D
  // R13にsegment+indexの指す位置が格納された。
  @R13
  A=M
  D=M
        @SP
        A=M
        M=D
        @SP
        M=M+1
      @SP
      M=M-1
      A=M
      D=M
      @COMPUTE_ELEMENT
      D; JNE
      @END_PROGRAM
      0; JMP
      (COMPUTE_ELEMENT)
  @THAT
  D=M
  @0
  D=D+A
  @R13
  M=D
  // R13にsegment+indexの指す位置が格納された。
  @R13
  A=M
  D=M
        @SP
        A=M
        M=D
        @SP
        M=M+1
  @THAT
  D=M
  @1
  D=D+A
  @R13
  M=D
  // R13にsegment+indexの指す位置が格納された。
  @R13
  A=M
  D=M
        @SP
        A=M
        M=D
        @SP
        M=M+1
        @SP
        M=M-1
        A=M
        D=M
        @SP
        M=M-1
        A=M
        D=D+M
        M=D
        @SP
        M=M+1
    // ↓R13に THAT+index を保存
    @THAT
    D=M
    @2
    D=D+A
    @R13
    M=D
    // ↑R13に THAT+index を保存
    // ↓R13の位置にスタックから値を格納
    @SP
    M=M-1
    A=M
    D=M
    @R13
    A=M
    M=D
          @R3
          D=A
          @1
          D=D+A
          @R13
          M=D
          // R13にtemp+indexの指す位置が格納された。
          @R13
          A=M
          D=M
        @SP
        A=M
        M=D
        @SP
        M=M+1
          @1
          D=A
        @SP
        A=M
        M=D
        @SP
        M=M+1
        @SP
        M=M-1
        A=M
        D=M
        @SP
        M=M-1
        A=M
        D=D+M
        M=D
        @SP
        M=M+1
          @R3
          D=A
          @1
          D=D+A
          @R13
          M=D
          // ↑R13に R3+index を保存
          @SP
          M=M-1
          A=M
          D=M
          @R13
          A=M
          M=D
  @ARG
  D=M
  @0
  D=D+A
  @R13
  M=D
  // R13にsegment+indexの指す位置が格納された。
  @R13
  A=M
  D=M
        @SP
        A=M
        M=D
        @SP
        M=M+1
          @1
          D=A
        @SP
        A=M
        M=D
        @SP
        M=M+1
        @SP
        M=M-1
        A=M
        D=M
        @SP
        M=M-1
        A=M
        D=M-D
        M=D
        @SP
        M=M+1
    // ↓R13に ARG+index を保存
    @ARG
    D=M
    @0
    D=D+A
    @R13
    M=D
    // ↑R13に ARG+index を保存
    // ↓R13の位置にスタックから値を格納
    @SP
    M=M-1
    A=M
    D=M
    @R13
    A=M
    M=D
      @MAIN_LOOP_START
      0; JMP
      (END_PROGRAM)
